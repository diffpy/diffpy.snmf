<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>diffpy.snmf package &mdash; diffpy.snmf 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=38b66d78"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Release Notes" href="../release.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            diffpy.snmf
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Tutorial (To be addded)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Package API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.subroutines">diffpy.snmf.subroutines module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.construct_component_matrix"><code class="docutils literal notranslate"><span class="pre">construct_component_matrix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.construct_stretching_matrix"><code class="docutils literal notranslate"><span class="pre">construct_stretching_matrix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.construct_weight_matrix"><code class="docutils literal notranslate"><span class="pre">construct_weight_matrix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.get_residual_matrix"><code class="docutils literal notranslate"><span class="pre">get_residual_matrix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.get_stretched_component"><code class="docutils literal notranslate"><span class="pre">get_stretched_component()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.initialize_arrays"><code class="docutils literal notranslate"><span class="pre">initialize_arrays()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.initialize_components"><code class="docutils literal notranslate"><span class="pre">initialize_components()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.lift_data"><code class="docutils literal notranslate"><span class="pre">lift_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.objective_function"><code class="docutils literal notranslate"><span class="pre">objective_function()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.reconstruct_data"><code class="docutils literal notranslate"><span class="pre">reconstruct_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.reconstruct_signal"><code class="docutils literal notranslate"><span class="pre">reconstruct_signal()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.update_weights"><code class="docutils literal notranslate"><span class="pre">update_weights()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.subroutines.update_weights_matrix"><code class="docutils literal notranslate"><span class="pre">update_weights_matrix()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.containers">diffpy.snmf.containers module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.containers.ComponentSignal"><code class="docutils literal notranslate"><span class="pre">ComponentSignal</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.io">diffpy.snmf.io module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.io.initialize_variables"><code class="docutils literal notranslate"><span class="pre">initialize_variables()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.io.load_input_signals"><code class="docutils literal notranslate"><span class="pre">load_input_signals()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.polynomials">diffpy.snmf.polynomials module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.polynomials.rooth"><code class="docutils literal notranslate"><span class="pre">rooth()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.optimizers">diffpy.snmf.optimizers module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.optimizers.get_weights"><code class="docutils literal notranslate"><span class="pre">get_weights()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.factorizers">diffpy.snmf.factorizers module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.factorizers.lsqnonneg"><code class="docutils literal notranslate"><span class="pre">lsqnonneg()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-diffpy.snmf.stretchednmfapp">diffpy.snmf.stretchednmfapp module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.stretchednmfapp.create_parser"><code class="docutils literal notranslate"><span class="pre">create_parser()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#diffpy.snmf.stretchednmfapp.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">diffpy.snmf</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">diffpy.snmf package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/diffpy.snmf.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-diffpy.snmf">
<span id="diffpy-snmf-package"></span><h1>diffpy.snmf package<a class="headerlink" href="#module-diffpy.snmf" title="Link to this heading"></a></h1>
<p>A python package implementing the stretched NMF algorithm.</p>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
<section id="module-diffpy.snmf.subroutines">
<span id="diffpy-snmf-subroutines-module"></span><h3>diffpy.snmf.subroutines module<a class="headerlink" href="#module-diffpy.snmf.subroutines" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.construct_component_matrix">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">construct_component_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#construct_component_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.construct_component_matrix" title="Link to this definition"></a></dt>
<dd><p>Constructs the component matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>components</strong> (<em>tuple</em><em> of </em><em>ComponentSignal objects</em>) – The tuple containing the component signals in ComponentSignal objects.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The matrix containing the component signal values. Has dimensions <cite>signal_length</cite> x <cite>number_of_components</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.construct_stretching_matrix">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">construct_stretching_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_signals</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#construct_stretching_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.construct_stretching_matrix" title="Link to this definition"></a></dt>
<dd><p>Constructs the stretching factor matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>components</strong> (<em>tuple</em><em> of </em><em>ComponentSignal objects</em>) – The tuple containing the component signals in ComponentSignal objects.</p></li>
<li><p><strong>number_of_signals</strong> (<em>int</em>) – The number of signals in the data provided by the user.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The matrix containing the stretching factors for the component signals for each of the signals in the
raw data. Has dimensions <cite>component_signal</cite> x <cite>number_of_signals</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.construct_weight_matrix">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">construct_weight_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#construct_weight_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.construct_weight_matrix" title="Link to this definition"></a></dt>
<dd><p>Constructs the weights matrix.</p>
<p>Constructs a Ķ x M matrix where K is the number of components and M is the
number of signals. Each element is the stretching factor for a specific
weights for a specific signal from the data input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>components</strong> (<em>tuple</em><em> of </em><em>ComponentSignal objects</em>) – The tuple containing the component signals.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The 2d array containing the weightings for each component for each signal.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.get_residual_matrix">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">get_residual_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretching_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moment_amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#get_residual_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.get_residual_matrix" title="Link to this definition"></a></dt>
<dd><p>Obtains the residual matrix between the experimental data and calculated data.</p>
<p>Calculates the difference between the experimental data and the reconstructed experimental data created from
the calculated components, weights, and stretching factors. For each experimental pattern, the stretched and
weighted components making up that pattern are subtracted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_matrix</strong> (<em>2d array like</em>) – The matrix containing the calculated component signals. Has dimensions N x K where N is the length of the
signal and K is the number of calculated component signals.</p></li>
<li><p><strong>weights_matrix</strong> (<em>2d array like</em>) – The matrix containing the calculated weights of the stretched component signals. Has dimensions K x M where
K is the number of components and M is the number of moments or experimental PDF/XRD patterns.</p></li>
<li><p><strong>stretching_matrix</strong> (<em>2d array like</em>) – The matrix containing the calculated stretching factors of the calculated component signals. Has dimensions
K x M where K is the number of components and M is the number of moments or experimental PDF/XRD patterns.</p></li>
<li><p><strong>data_input</strong> (<em>2d array like</em>) – The matrix containing the experimental PDF/XRD data. Has dimensions N x M where N is the length of the
signals and M is the number of signal patterns.</p></li>
<li><p><strong>moment_amount</strong> (<em>int</em>) – The number of patterns in the experimental data. Represents the number of moments in time in the data series</p></li>
<li><p><strong>component_amount</strong> (<em>int</em>) – The number of component signals the user would like to obtain from the experimental data.</p></li>
<li><p><strong>signal_length</strong> (<em>int</em>) – The length of the signals in the experimental data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The matrix containing the residual between the experimental data and reconstructed data from calculated
values. Has dimensions N x M where N is the signal length and M is the number of moments. Each column
contains the difference between an experimental signal and a reconstruction of that signal from the
calculated weights, components, and stretching factors.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.get_stretched_component">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">get_stretched_component</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stretching_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#get_stretched_component"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.get_stretched_component" title="Link to this definition"></a></dt>
<dd><p>Applies a stretching factor to a component signal.</p>
<p>Computes a stretched signal and reinterpolates it onto the original grid of points. Uses a normalized grid
of evenly spaced integers counting from 0 to signal_length (exclusive) to approximate values in between grid
nodes. Once this grid is stretched, values at grid nodes past the unstretched signal’s domain are set to zero.
Returns the approximate values of x(r/a) from x(r) where x is a component signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stretching_factor</strong> (<em>float</em>) – The stretching factor of a component signal at a particular moment.</p></li>
<li><p><strong>component</strong> (<em>1d array like</em>) – The calculated component signal without stretching or weighting. Has length N, the length of the signal.</p></li>
<li><p><strong>signal_length</strong> (<em>int</em>) – The length of the component signal.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The calculated component signal with stretching factors applied. Has length N, the length of the unstretched
component signal. Also returns the gradient and hessian of the stretching transformation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of 1d array of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.initialize_arrays">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">initialize_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_of_components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_moments</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_length</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#initialize_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.initialize_arrays" title="Link to this definition"></a></dt>
<dd><p>Generates the initial guesses for the weight, stretching, and component matrices.</p>
<p>Calculates the initial guesses for the component matrix, stretching factor matrix, and weight matrix. The
initial guess for the component matrix is a random (signal_length) x (number_of_components) matrix where
each element is between 0 and 1. The initial stretching factor matrix is a random
(number_of_components) x (number_of_moments) matrix where each element is number slightly perturbed from 1.
The initial weight matrix guess is a random (number_of_components) x (number_of_moments) matrix where
each element is between 0 and 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_of_components</strong> (<em>int</em>) – The number of component signals to obtain from the stretched nmf decomposition.</p></li>
<li><p><strong>number_of_moments</strong> (<em>int</em>) – The number of signals in the user provided dataset where each signal is at a different moment.</p></li>
<li><p><strong>signal_length</strong> (<em>int</em>) – The length of each signal in the user provided dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tuple containing three elements: the initial component matrix guess, the initial stretching factor matrix
guess, and the initial weight factor matrix guess in that order.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of 2d arrays of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.initialize_components">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">initialize_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_of_components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_vector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#initialize_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.initialize_components" title="Link to this definition"></a></dt>
<dd><p>Initializes ComponentSignals for each of the components in the decomposition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_of_components</strong> (<em>int</em>) – The number of component signals in the NMF decomposition</p></li>
<li><p><strong>number_of_signals</strong> (<em>int</em>)</p></li>
<li><p><strong>grid_vector</strong> (<em>1d array</em>) – The grid of the user provided signals.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tuple containing <cite>number_of_components</cite> of initialized ComponentSignal objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of ComponentSignal objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.lift_data">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">lift_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#lift_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.lift_data" title="Link to this definition"></a></dt>
<dd><p>Lifts values of data_input.</p>
<p>Adds ‘lift’ * the minimum value in data_input to data_input element-wise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_input</strong> (<em>2d array like</em>) – The matrix containing a series of signals to be decomposed. Has dimensions N x M where N is the length
of each signal and M is the number of signals.</p></li>
<li><p><strong>lift</strong> (<em>float</em>) – The factor representing how much to lift ‘data_input’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The matrix that contains data_input - (min(data_input) * lift).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.objective_function">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">objective_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">residual_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretching_factor_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothness</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothness_term</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sparsity</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#objective_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.objective_function" title="Link to this definition"></a></dt>
<dd><p>Defines the objective function of the algorithm and returns its value.</p>
<p>Calculates the value of ‘(||residual_matrix||_F) ** 2 + smoothness * (||smoothness_term *
stretching_factor_matrix.T||)**2 + sparsity * sum(component_matrix ** .5)’ and returns its value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>residual_matrix</strong> (<em>2d array like</em>) – The matrix where each column is the difference between an experimental PDF/XRD pattern and a calculated
PDF/XRD pattern at each grid point. Has dimensions R x M where R is the length of each pattern and M is
the amount of patterns.</p></li>
<li><p><strong>stretching_factor_matrix</strong> (<em>2d array like</em>) – The matrix containing the stretching factors of the calculated component signal. Has dimensions K x M where
K is the amount of components and M is the number of experimental PDF/XRD patterns.</p></li>
<li><p><strong>smoothness</strong> (<em>float</em>) – The coefficient of the smoothness term which determines the intensity of the smoothness term and its
behavior. It is not very sensitive and is usually adjusted by multiplying it by ten.</p></li>
<li><p><strong>smoothness_term</strong> (<em>2d array like</em>) – The regularization term that ensures that smooth changes in the component stretching signals are favored.
Has dimensions (M-2) x M where M is the amount of experimentally obtained PDF/XRD patterns, the moment
amount.</p></li>
<li><p><strong>component_matrix</strong> (<em>2d array like</em>) – The matrix containing the calculated component signals of the experimental PDF/XRD patterns. Has dimensions
R x K where R is the signal length and K is the number of component signals.</p></li>
<li><p><strong>sparsity</strong> (<em>float</em>) – The parameter determining the intensity of the sparsity regularization term which enables the algorithm to
exploit the sparse nature of XRD data. It is usually adjusted by doubling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The value of the objective function.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.reconstruct_data">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">reconstruct_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#reconstruct_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.reconstruct_data" title="Link to this definition"></a></dt>
<dd><p>Reconstructs the <cite>input_data</cite> matrix.</p>
<p>Reconstructs the <cite>input_data</cite> matrix from calculated component signals, weights, and stretching factors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>components</strong> (<em>tuple</em><em> of </em><em>ComponentSignal objects</em>) – The tuple containing the component signals.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The 2d array containing the reconstruction of input_data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.reconstruct_signal">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">reconstruct_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#reconstruct_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.reconstruct_signal" title="Link to this definition"></a></dt>
<dd><p>Reconstructs a specific signal from its weighted and stretched components.</p>
<p>Calculates the linear combination of stretched components where each term is the stretched component multiplied
by its weight factor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>components</strong> (<em>tuple</em><em> of </em><em>ComponentSignal objects</em>) – The tuple containing the ComponentSignal objects</p></li>
<li><p><strong>signal_idx</strong> (<em>int</em>) – The index of the specific signal in the input data to be reconstructed</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The reconstruction of a signal from calculated weights, stretching factors, and iq values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array like</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.update_weights">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">update_weights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#update_weights"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.update_weights" title="Link to this definition"></a></dt>
<dd><p>Updates the weights matrix.</p>
<p>Updates the weights matrix and the weights vector for each ComponentSignal object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>components</strong> (<em>tuple</em><em> of </em><em>ComponentSignal objects</em>) – The tuple containing the component signals.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – The string specifying which method should be used to find a new weight matrix: non-negative least squares
or a quadratic program.</p></li>
<li><p><strong>data_input</strong> (<em>2d array</em>) – The 2d array containing the user-provided signals.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The 2d array containing the weight factors for each component for each signal from <cite>data_input</cite>.
Has dimensions K x M where K is the number of components and M is the number of signals in <cite>data_input.</cite></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.subroutines.update_weights_matrix">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.subroutines.</span></span><span class="sig-name descname"><span class="pre">update_weights_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretching_factor_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moment_amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/subroutines.html#update_weights_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.subroutines.update_weights_matrix" title="Link to this definition"></a></dt>
<dd><p>Update the weight factors matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_amount</strong> (<em>int</em>) – The number of component signals the user would like to determine from the experimental data.</p></li>
<li><p><strong>signal_length</strong> (<em>int</em>) – The length of the experimental signal patterns</p></li>
<li><p><strong>stretching_factor_matrix</strong> (<em>2d array like</em>) – The matrx containing the stretching factors of the calculated component signals. Has dimensions K x M
where K is the number of component signals and M is the number of XRD/PDF patterns.</p></li>
<li><p><strong>component_matrix</strong> (<em>2d array lik</em>) – The matrix containing the unstretched calculated component signals. Has dimensions N x K where N is the
length of the signals and K is the number of component signals.</p></li>
<li><p><strong>data_input</strong> (<em>2d array like</em>) – The experimental series of PDF/XRD patterns. Has dimensions N x M where N is the length of the PDF/XRD
signals and M is the number of PDF/XRD patterns.</p></li>
<li><p><strong>moment_amount</strong> (<em>int</em>) – The number of PDF/XRD patterns from the experimental data.</p></li>
<li><p><strong>weights_matrix</strong> (<em>2d array like</em>) – The matrix containing the weights of the stretched component signals. Has dimensions K x M where K is
the number of component signals and M is the number of XRD/PDF patterns.</p></li>
<li><p><strong>method</strong> (<em>str</em>) – The string specifying the method for obtaining individual weights.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The matrix containing the new weight factors of the stretched component signals.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>2d array like</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-diffpy.snmf.containers">
<span id="diffpy-snmf-containers-module"></span><h3>diffpy.snmf.containers module<a class="headerlink" href="#module-diffpy.snmf.containers" title="Link to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">diffpy.snmf.containers.</span></span><span class="sig-name descname"><span class="pre">ComponentSignal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_signals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perturbation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/containers.html#ComponentSignal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.grid">
<span class="sig-name descname"><span class="pre">grid</span></span><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.grid" title="Link to this definition"></a></dt>
<dd><p>The vector containing the grid points of the component.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.iq">
<span class="sig-name descname"><span class="pre">iq</span></span><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.iq" title="Link to this definition"></a></dt>
<dd><p>The intensity/g(r) values of the component.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.weights">
<span class="sig-name descname"><span class="pre">weights</span></span><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.weights" title="Link to this definition"></a></dt>
<dd><p>The vector containing the weight of the component signal for each signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.stretching_factors">
<span class="sig-name descname"><span class="pre">stretching_factors</span></span><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.stretching_factors" title="Link to this definition"></a></dt>
<dd><p>The vector containing the stretching factor for the component signal for each signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.id">
<span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.id" title="Link to this definition"></a></dt>
<dd><p>The number identifying the component.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.apply_stretch">
<span class="sig-name descname"><span class="pre">apply_stretch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/containers.html#ComponentSignal.apply_stretch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.apply_stretch" title="Link to this definition"></a></dt>
<dd><p>Applies a stretching factor to a component</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>m</strong> (<em>int</em>) – The index specifying which stretching factor to apply</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tuple of vectors where one vector is the stretched component, one vector is the 1st derivative of the
stretching operation, and one vector is the second derivative of the stretching operation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of 1d arrays</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="diffpy.snmf.containers.ComponentSignal.apply_weight">
<span class="sig-name descname"><span class="pre">apply_weight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stretched_component</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/containers.html#ComponentSignal.apply_weight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.containers.ComponentSignal.apply_weight" title="Link to this definition"></a></dt>
<dd><p>Applies as weight factor to a component signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m</strong> (<em>int</em>) – The index specifying with weight to apply</p></li>
<li><p><strong>stretched_component</strong> (<em>1d array</em>) – The 1d array containing a stretched component.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The vector containing a component signal or stretched component signal with a weight factor applied.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-diffpy.snmf.io">
<span id="diffpy-snmf-io-module"></span><h3>diffpy.snmf.io module<a class="headerlink" href="#module-diffpy.snmf.io" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.io.initialize_variables">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.io.</span></span><span class="sig-name descname"><span class="pre">initialize_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sparsity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e+18</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/io.html#initialize_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.io.initialize_variables" title="Link to this definition"></a></dt>
<dd><p>Determines the variables and initial values used in the SNMF algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_input</strong> (<em>2d array like</em>) – The observed or simulated PDF or XRD data provided by the user. Has dimensions R x N where R is the signa
length and N is the number of PDF/XRD signals.</p></li>
<li><p><strong>number_of_components</strong> (<em>int</em>) – The number of component signals the user would like to decompose ‘data_input’ into.</p></li>
<li><p><strong>data_type</strong> (<em>str</em>) – The type of data the user has passed into the program. Can assume the value of ‘PDF’ or ‘XRD.’</p></li>
<li><p><strong>sparsity</strong> (<em>float</em><em>, </em><em>optional</em>) – The regularization parameter that behaves as the coefficient of a “sparseness” regularization term that
enhances the ability to decompose signals in the case of sparse data e.g. X-ray Diffraction data.
A non-zero value indicates sparsity in the data; greater magnitudes indicate greater amounts of sparsity.</p></li>
<li><p><strong>smoothness</strong> (<em>float</em><em>, </em><em>optional</em>) – The regularization parameter that behaves as the coefficient of a “smoothness” term that ensures that
component signal weightings change smoothly with time. Assumes a default value of 1e18.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The collection of the names and values of the constants used in the algorithm. Contains the number of
observed PDF/XRD patterns, the length of each pattern, the type of the data, the number of components
the user would like to decompose the data into, an initial guess for the component matrix, and initial
guess for the weight factor matrix, an initial guess for the stretching factor matrix, a parameter
controlling smoothness of the solution, a parameter controlling sparseness of the solution, the matrix
representing the smoothness term, and a matrix used to construct a hessian matrix.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.io.load_input_signals">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.io.</span></span><span class="sig-name descname"><span class="pre">load_input_signals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/io.html#load_input_signals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.io.load_input_signals" title="Link to this definition"></a></dt>
<dd><p>Processes a directory of a series of PDF/XRD patterns into a usable format.</p>
<p>Constructs a 2d array out of a directory of PDF/XRD patterns containing each files dependent variable
column in a new column. Constructs a 1d array containing the grid values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em><em> or </em><em>Path object</em><em>, </em><em>optional</em>) – The path to the directory containing the input XRD/PDF data. If no path is specified, defaults to the
current working directory. Accepts a string or a pathlib.Path object. Input data not on the same grid
as the first file read will be ignored.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The tuple whose first element is an R x M 2d array made of PDF/XRD patterns as each column; R is the
length of the signal and M is the number of patterns. The tuple contains a 1d array containing the values
of the grid points as its second element; Has length R.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-diffpy.snmf.polynomials">
<span id="diffpy-snmf-polynomials-module"></span><h3>diffpy.snmf.polynomials module<a class="headerlink" href="#module-diffpy.snmf.polynomials" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.polynomials.rooth">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.polynomials.</span></span><span class="sig-name descname"><span class="pre">rooth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">linear_coefficient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constant_term</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/polynomials.html#rooth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.polynomials.rooth" title="Link to this definition"></a></dt>
<dd><p>Returns the largest real root of x^3+(linear_coefficient) * x + constant_term. If there are no real roots
return 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>linear_coefficient</strong> (<em>nd array like</em><em> of </em><em>floats</em>) – The matrix coefficient of the linear term</p></li>
<li><p><strong>constant_term</strong> (<em>0d array like</em><em>, </em><em>1d array like</em><em> of </em><em>floats</em><em> or </em><em>scalar</em>) – The constant scalar term of the problem</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The largest real root of x^3+(linear_coefficient) * x + constant_term if roots are real, else
return 0 array</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ndarray of floats</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-diffpy.snmf.optimizers">
<span id="diffpy-snmf-optimizers-module"></span><h3>diffpy.snmf.optimizers module<a class="headerlink" href="#module-diffpy.snmf.optimizers" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.optimizers.get_weights">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.optimizers.</span></span><span class="sig-name descname"><span class="pre">get_weights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stretched_component_gram_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linear_coefficient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_bound</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/optimizers.html#get_weights"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.optimizers.get_weights" title="Link to this definition"></a></dt>
<dd><p>Finds the weights of stretched component signals under a two-sided constraint</p>
<p>Solves min J(y) = (linear_coefficient)’ * y + (1/2) * y’ * (quadratic coefficient) * y where
lower_bound &lt;= y &lt;= upper_bound and stretched_component_gram_matrix is symmetric positive definite.
Finds the weightings of stretched component signals under a two-sided constraint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stretched_component_gram_matrix</strong> (<em>2d array like</em>) – The Gram matrix constructed from the stretched component matrix. It is a square positive definite matrix.
It has dimensions C x C where C is the number of component signals. Must be symmetric positive definite.</p></li>
<li><p><strong>linear_coefficient</strong> (<em>1d array like</em>) – The vector containing the product of the stretched component matrix and the transpose of the observed
data matrix. Has length C.</p></li>
<li><p><strong>lower_bound</strong> (<em>1d array like</em>) – The lower bound on the values of the output weights. Has the same dimensions of the function output. Each
element in ‘lower_bound’ determines the minimum value the corresponding element in the function output may
take.</p></li>
<li><p><strong>upper_bound</strong> (<em>1d array like</em>) – The upper bound on the values of the output weights. Has the same dimensions of the function output. Each
element in ‘upper_bound’ determines the maximum value the corresponding element in the function output may
take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The vector containing the weightings of the components needed to reconstruct a given input signal from the
input set. Has length C</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array like</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-diffpy.snmf.factorizers">
<span id="diffpy-snmf-factorizers-module"></span><h3>diffpy.snmf.factorizers module<a class="headerlink" href="#module-diffpy.snmf.factorizers" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.factorizers.lsqnonneg">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.factorizers.</span></span><span class="sig-name descname"><span class="pre">lsqnonneg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stretched_component_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/factorizers.html#lsqnonneg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.factorizers.lsqnonneg" title="Link to this definition"></a></dt>
<dd><p>Finds the weights of stretched component signals under one-sided constraint.</p>
<p>Solves <code class="docutils literal notranslate"><span class="pre">argmin_x</span> <span class="pre">||</span> <span class="pre">Ax</span> <span class="pre">-</span> <span class="pre">b</span> <span class="pre">||_2</span></code> for <code class="docutils literal notranslate"><span class="pre">x&gt;=0</span></code> where A is the stretched_component_matrix and b is the
target_signal vector. Finds the weights of component signals given undecomposed signal data and stretched
components under a one-sided constraint on the weights.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stretched_component_matrix</strong> (<em>2d array like</em>) – The component matrix where each column contains a stretched component signal. Has dimensions R x C where R is
the length of the signal and C is the number of components. Does not need to be nonnegative. Corresponds with
‘A’ from the objective function.</p></li>
<li><p><strong>target_signal</strong> (<em>1d array like</em>) – The signal that is used as reference against which weight factors will be determined. Any column from the
matrix of the entire, unfactorized input data could be used. Has length R. Does not need to be nonnegative.
Corresponds with ‘b’ from the objective function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The vector containing component signal weights at a moment. Has length C.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>1d array like</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-diffpy.snmf.stretchednmfapp">
<span id="diffpy-snmf-stretchednmfapp-module"></span><h3>diffpy.snmf.stretchednmfapp module<a class="headerlink" href="#module-diffpy.snmf.stretchednmfapp" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.stretchednmfapp.create_parser">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.stretchednmfapp.</span></span><span class="sig-name descname"><span class="pre">create_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/stretchednmfapp.html#create_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.stretchednmfapp.create_parser" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="diffpy.snmf.stretchednmfapp.main">
<span class="sig-prename descclassname"><span class="pre">diffpy.snmf.stretchednmfapp.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/diffpy/snmf/stretchednmfapp.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#diffpy.snmf.stretchednmfapp.main" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../release.html" class="btn btn-neutral float-left" title="Release Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, The Trustees of Columbia University in the City of New York.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>